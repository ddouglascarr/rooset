machine:
  services:
    - docker

#checkout:
#  post:
#    - git submodule update --init --recursive

database:
  override:
    - createuser rooset
    - createdb --owner=rooset rooset_http_api_integration_testing
    - psql -c "ALTER USER rooset WITH PASSWORD 'rooset';"
compile:
  override:
    - docker build -t circle-rooset --file circle.Dockerfile .

test:
  override:
    - docker run -t --net=host circle-rooset -c "./run-all-tests"
