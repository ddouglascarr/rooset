#!/bin/bash
set -o errexit -o nounset -o pipefail

# Workingdirection is rooset base dir
SCRIPTDIR=`dirname "$(readlink -f "$0")"`
cd ${SCRIPTDIR}

source ${SCRIPTDIR}/etc/set-env

# setup all javascript packages
npm install
echo "y" | npm run lerna clean
npm run lerna --yes bootstrap

# generate source files
./gen/generate

# configure and compile domain-command-posix
./rooset-domain-command-posix/configure

# compile http-api
./rooset-http-api/configure
